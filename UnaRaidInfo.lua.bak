UnaRaidInfo = LibStub("AceAddon-3.0"):NewAddon("UnaRaidInfo", "AceConsole-3.0", "AceEvent-3.0" );


function UnaRaidInfo:OnInitialize()
		-- Called when the addon is loaded

		-- Print a message to the chat frame
		local _, raid = next(una_raids)
		UnaRaidInfo:RegisterChatCommand("una", "UnaInfoHandler")
		UnaUIConfig = CreateFrame("Frame", "UnaRaidInfo", UIParent, "BasicFrameTemplateWithInset");
		UnaUIConfig:Hide();
		UnaUIConfig:SetSize(550, 600);
		UnaUIConfig:SetPoint("CENTER", UIParent, "CENTER");
		UnaUIConfig:SetFrameStrata("HIGH")
    	UnaUIConfig:SetFrameLevel(10)

		UnaUIConfig.title = UnaUIConfig:CreateFontString(nil, "OVERLAY", "GameFontHighlight");
		UnaUIConfig.title:SetPoint("LEFT", UnaUIConfig.TitleBg, "LEFT", 5, 0);
		UnaUIConfig.title:SetText(format("Una Raid Info for %s | Start Time: %s | End Time: %s | All times in ST", raid["date"], raid["start"], raid["end"]));
		
		UnaUIConfig.InsetBgFrame = CreateFrame("Frame", nil, UnaUIConfig)
		UnaUIConfig.InsetBgFrame:SetPoint("TOPLEFT", 10, -30)
		UnaUIConfig.InsetBgFrame:SetPoint("BOTTOMRIGHT", -10, 10)
		
		-- Create and set the texture
		UnaUIConfig.InsetBg = UnaUIConfig.InsetBgFrame:CreateTexture(nil, "BACKGROUND")
		UnaUIConfig.InsetBg:SetTexture(format("Interface\\Addons\\UnaRaidInfo\\%s", raid["picture"]))
		UnaUIConfig.InsetBg:SetAllPoints(UnaUIConfig.InsetBgFrame)


		-- Make the frame draggable
		UnaUIConfig:SetMovable(true);
		UnaUIConfig:EnableMouse(true);
		UnaUIConfig:RegisterForDrag("LeftButton");
		UnaUIConfig:SetScript("OnDragStart", UnaUIConfig.StartMoving);
		UnaUIConfig:SetScript("OnDragStop", UnaUIConfig.StopMovingOrSizing);
	
		UnaUIConfig:Hide();
end

function UnaRaidInfo:OnEnable()
		-- Called when the addon is enabled

		-- Print a message to the chat frame
		self:Print("OnEnable Event Fired: Hello, again ;)")
end

function UnaRaidInfo:OnDisable()
		-- Called when the addon is disabled
end

function UnaRaidInfo:UnaInfoHandler() 
	self:Print("FIRED NEW UNA INFO HANDLER")
	UnaUIConfig:Show();
	
end
